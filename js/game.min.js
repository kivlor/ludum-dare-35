var bootState,loadState,playState;bootState={create:function(){return game.stage.backgroundColor=12370116,game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,game.scale.setUserScale(2,2),game.renderer.renderSession.roundPixels=!0,Phaser.Canvas.setImageRenderingCrisp(game.canvas),game.physics.startSystem(Phaser.Physics.ARCADE),game.state.start("load")}},loadState={preload:function(){var e;return e=game.add.text(game.world.centerX,game.world.centerY,""),e.anchor.setTo(.5,.5),e.text="loading...",game.load.image("land","/images/land.png"),game.load.image("sea","/images/sea.png"),game.load.image("air","/images/air.png"),game.load.image("barricade","/images/barricade.png"),game.load.image("shift","/images/shift.png"),game.load.image("car","/images/car.png"),game.load.image("boat","/images/boat.png")},create:function(){return game.state.start("play")}},playState={init:function(){return this.speed=3,this.speedTimer=null,this.objects=[],this.objectTimer=null,this.trackTimer=null},create:function(){return this.cursorKeys=game.input.keyboard.createCursorKeys(),this.jumpKey=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.terrainLayer=game.add.group(),this.objectLayer=game.add.group(),this.playerLayer=game.add.group(),this.overlayLayer=game.add.group(),this.createTrack(),this.createPlayer(),this.createSpeedTimer(),this.createObjectTimer(),this.createTrackTimer()},update:function(){return game.physics.arcade.overlap(this.player,this.objectLayer,function(e){return function(){return e.killPlayer()}}(this)),this.moveTrack(),this.movePlayer(),this.moveObjects(),this.revivePlayer()},createSpeedTimer:function(){return this.speedTimer=game.time.events.loop(10*Phaser.Timer.SECOND,function(e){return function(){return 6!==e.speed?e.speed++:void 0}}(this))},createObjectTimer:function(){return this.objectTimer=game.time.events.loop(2*Phaser.Timer.SECOND,function(e){return function(){return 0!==game.rnd.normal()?e.createObject():void 0}}(this))},createTrackTimer:function(){return this.trackTimer=game.time.events.loop(15*Phaser.Timer.SECOND,function(e){return function(){return e.switchTrack()}}(this))},createTrack:function(){return this.track=game.add.tileSprite(0,-240,256,480,"land"),this.terrainLayer.add(this.track)},moveTrack:function(){return this.track.position.y<0?this.track.position.y+=this.speed:this.track.position.y=-240},createPlayer:function(){return this.player=game.add.sprite(game.world.centerX,206,"car"),this.player.anchor.setTo(.5,.5),game.physics.arcade.enable(this.player),this.playerLayer.add(this.player)},movePlayer:function(){return this.player.alive===!0?(this.cursorKeys.up.isDown&&this.player.position.y>36?this.player.body.velocity.y=-160:this.cursorKeys.down.isDown&&this.player.position.y<206?this.player.body.velocity.y=160:this.player.body.velocity.y=0,this.cursorKeys.left.isDown&&this.player.position.x>56?this.player.body.velocity.x=-160:this.cursorKeys.right.isDown&&this.player.position.x<200?this.player.body.velocity.x=160:this.player.body.velocity.x=0):void 0},killPlayer:function(){var e;return this.player.alive=!1,this.player.body.velocity.x=0,this.player.body.velocity.y=0,this.speed=0,game.time.events.remove(this.speedTimer),game.time.events.remove(this.objectTimer),e=game.add.text(game.world.centerX,game.world.centerY,""),e.anchor.setTo(.5,.5),e.text="spacebar to retry",this.overlayLayer.add(e)},revivePlayer:function(){return this.player.alive===!1&&this.jumpKey.isDown?game.state.start("play"):void 0},createObject:function(){var e,t;return t=game.rnd.pick([40,88,136,184]),e=game.add.sprite(t,-16,"barricade"),e.type="obstacle",game.physics.arcade.enable(e),this.objectLayer.add(e)},moveObjects:function(){return this.objectLayer.length>0?this.objectLayer.forEach(function(e){return function(t){return t.position.y>240?t.destroy:t.position.y+=e.speed}}(this)):void 0},createShifter:function(){var e,t;return t=game.rnd.pick([40,88,136,184]),e=game.add.sprite(t,-16,"shifter"),e.type="shifter",game.physics.arcade.enable(e),this.objectLayer.add(e)}};